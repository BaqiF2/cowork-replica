# Project Context

## Purpose

**Claude Replica** æ˜¯ä¸€ä¸ªå®Œæ•´å¤åˆ» Claude Code æ™ºèƒ½ç¼–ç åŠ©æ‰‹çš„å‘½ä»¤è¡Œå·¥å…·ï¼ŒåŸºäº Claude Agent SDK æ„å»ºï¼Œæä¾›å¼ºå¤§çš„ AI è¾…åŠ©ç¼–ç¨‹èƒ½åŠ›ã€‚

**æ ¸å¿ƒç›®æ ‡**ï¼š
1. ğŸ“š **å­¦ä¹  Claude Code æ ¸å¿ƒç‰¹æ€§** - æ·±å…¥ç†è§£ Claude Code çš„è®¾è®¡ç†å¿µã€æ¶æ„æ¨¡å¼å’ŒåŠŸèƒ½é›†
2. ğŸš€ **æŒæ¡ Claude Agent SDK** - ç†Ÿç»ƒä½¿ç”¨ SDK çš„æ ¸å¿ƒèƒ½åŠ›å’Œå¼€å‘å·¥ä½œæµ
3. ğŸ¯ **åˆ†å±‚æ¶æ„è„šæ‰‹æ¶** - é‡‡ç”¨æ¸…æ™°çš„åˆ†å±‚è®¾è®¡ï¼ˆCLIå±‚ã€ä¸šåŠ¡é€»è¾‘å±‚ã€SDKé€‚é…å±‚ï¼‰ï¼Œåªéœ€æ›¿æ¢ CLI å±‚å³å¯å¿«é€Ÿæ„å»ºæ–°çš„ AI Agent åº”ç”¨

## Tech Stack

| ç±»åˆ« | æŠ€æœ¯ | ç‰ˆæœ¬ |
|------|------|------|
| è¯­è¨€ | TypeScript | 5.9+ |
| è¿è¡Œæ—¶ | Node.js | â‰¥20.0.0 |
| æ ¸å¿ƒä¾èµ– | @anthropic-ai/claude-agent-sdk | ^0.1.76 |
| ç»ˆç«¯æ¨¡æ‹Ÿ | node-pty | ^1.1.0 |
| Schema éªŒè¯ | ajv + ajv-formats | ^8.17.1 / ^3.0.1 |
| æ–‡ä»¶å·®å¼‚ | diff | ^8.0.2 |
| ç¯å¢ƒé…ç½® | dotenv | ^17.2.3 |
| æµ‹è¯•æ¡†æ¶ | Jest | 29+ |
| å±æ€§æµ‹è¯• | fast-check | ^3.23.2 |
| æ„å»ºå·¥å…· | TypeScript Compiler (tsc) | - |
| ä»£ç è´¨é‡ | ESLint + Prettier | ^8.0.0 / ^3.0.0 |

## Project Conventions

### Code Style

#### TypeScript è§„èŒƒ
- **ä¸¥æ ¼æ¨¡å¼**ï¼šå¯ç”¨ `strict: true` ç¼–è¯‘é€‰é¡¹
- **æ˜¾å¼ç±»å‹æ³¨è§£**ï¼šæ‰€æœ‰å…¬å…± API å¿…é¡»æ˜¾å¼å£°æ˜ç±»å‹
- **ç¦æ­¢ `any`**ï¼šé¿å…ä½¿ç”¨ `any` ç±»å‹ï¼Œä½¿ç”¨ `unknown` æˆ–å…·ä½“ç±»å‹ä»£æ›¿
- **æ¥å£ä¼˜å…ˆ**ï¼šä½¿ç”¨ interface å®šä¹‰æ•°æ®ç»“æ„

#### å‘½åè§„èŒƒ
| å…ƒç´  | é£æ ¼ | ç¤ºä¾‹ |
|------|------|------|
| ç±»å | PascalCase | `SessionManager`, `ConfigManager` |
| å‡½æ•°/æ–¹æ³• | camelCase | `createSession`, `loadConfig` |
| å¸¸é‡ | UPPER_SNAKE_CASE | `MAX_SESSIONS`, `DEFAULT_TIMEOUT` |
| æ–‡ä»¶åï¼ˆç±»ï¼‰ | PascalCase | `SessionManager.ts` |
| æ–‡ä»¶åï¼ˆå·¥å…·ï¼‰ | camelCase | `testHelpers.ts` |
| ç›®å½•å | kebab-case / lowercase | `cli/`, `config/` |

#### æ³¨é‡Šè§„èŒƒ
- æ‰€æœ‰å…¬å…± API ä½¿ç”¨ JSDoc é£æ ¼æ³¨é‡Š
- åŒ…å« `@param`ã€`@returns`ã€`@throws`ã€`@example`
- å¤æ‚é€»è¾‘æ·»åŠ è¡Œå†…æ³¨é‡Šè¯´æ˜

```typescript
/**
 * åˆ›å»ºæ–°ä¼šè¯
 *
 * @param workingDir - å·¥ä½œç›®å½•è·¯å¾„
 * @param config - é…ç½®é€‰é¡¹ï¼ˆå¯é€‰ï¼‰
 * @returns æ–°åˆ›å»ºçš„ä¼šè¯å¯¹è±¡
 * @throws å¦‚æœæ— æ³•åˆ›å»ºä¼šè¯ç›®å½•
 *
 * @example
 * ```typescript
 * const session = await sessionManager.createSession('/path/to/project');
 * ```
 */
async function createSession(workingDir: string, config?: SessionConfig): Promise<Session>
```

#### ä»£ç è§„æ¨¡é™åˆ¶
- å•ä¸ªæ–‡ä»¶ä»£ç ä¸è¶…è¿‡ **1000 è¡Œ**
- è¶…è¿‡é™åˆ¶æ—¶åº”æ‹†åˆ†ä¸ºå¤šä¸ªæ¨¡å—

### Architecture Patterns

#### åˆ†å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CLI å±‚ï¼ˆå…¥å£ï¼‰                            â”‚
â”‚  cli.ts â†’ CLIParser â†’ å‚æ•°è§£æ                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  åº”ç”¨å±‚ï¼ˆç¼–æ’ï¼‰                                 â”‚
â”‚  main.ts â†’ Application ç±» â†’ åˆå§‹åŒ–æ‰€æœ‰ Manager                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   æ ¸å¿ƒå±‚ï¼ˆæ ¸å¿ƒé€»è¾‘ï¼‰                            â”‚
â”‚  MessageRouter | SessionManager | StreamingProcessor         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 SDK é›†æˆå±‚                                     â”‚
â”‚  SDKQueryExecutor â†’ å°è£… Claude Agent SDK                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                æ‰©å±•ç³»ç»Ÿå±‚                                       â”‚
â”‚  Skills | Commands | Agents | Hooks | MCP | Plugins           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  åŸºç¡€è®¾æ–½å±‚                                     â”‚
â”‚  Config | Permissions | Tools | Security | Output | CI        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### è®¾è®¡æ¨¡å¼

1. **Manager æ¨¡å¼**
   - æ¯ä¸ªå­ç³»ç»Ÿç”±ç‹¬ç«‹çš„ Manager ç±»ç®¡ç†
   - ç»Ÿä¸€çš„åˆå§‹åŒ–ã€åŠ è½½ã€æ¸…ç†æ¥å£

2. **é€‚é…å™¨æ¨¡å¼**
   - `SDKQueryExecutor`: å†…éƒ¨é€‰é¡¹ â†’ SDK Options
   - `MessageRouter`: Session ä¸Šä¸‹æ–‡ â†’ SDK ç³»ç»Ÿæç¤º

3. **ç­–ç•¥æ¨¡å¼**
   - `OutputFormatter`: å¤šç§è¾“å‡ºæ ¼å¼ï¼ˆtext/json/stream-json/markdownï¼‰
   - `PermissionManager`: ä¸åŒæƒé™æ¨¡å¼

#### æ¨¡å—ç»„ç»‡
```
src/
â”œâ”€â”€ agents/            # å­ä»£ç†æ³¨å†Œ
â”œâ”€â”€ ci/                # CI/CD æ”¯æŒ
â”œâ”€â”€ cli/               # CLI è§£æ
â”œâ”€â”€ commands/          # å‘½ä»¤æ¨¡æ¿
â”œâ”€â”€ config/            # é…ç½®ç®¡ç†
â”œâ”€â”€ context/           # ä¸Šä¸‹æ–‡ç®¡ç†
â”œâ”€â”€ core/              # æ ¸å¿ƒå¼•æ“ï¼ˆMessageRouter, SessionManager, StreamingProcessorï¼‰
â”œâ”€â”€ hooks/             # Hook ç®¡ç†
â”œâ”€â”€ image/             # å›¾ç‰‡å¤„ç†
â”œâ”€â”€ mcp/               # MCP é›†æˆ
â”œâ”€â”€ output/            # è¾“å‡ºæ ¼å¼åŒ–
â”œâ”€â”€ permissions/       # æƒé™ç®¡ç†
â”œâ”€â”€ plugins/           # æ’ä»¶ç³»ç»Ÿ
â”œâ”€â”€ rewind/            # å›é€€ç³»ç»Ÿ
â”œâ”€â”€ sandbox/           # æ²™ç›’ç®¡ç†
â”œâ”€â”€ sdk/               # SDK å°è£…
â”œâ”€â”€ security/          # å®‰å…¨ç®¡ç†
â”œâ”€â”€ skills/            # æŠ€èƒ½ç®¡ç†
â”œâ”€â”€ tools/             # å·¥å…·æ³¨å†Œ
â”œâ”€â”€ ui/                # äº¤äº’ç•Œé¢
â”œâ”€â”€ cli.ts             # CLI å…¥å£
â”œâ”€â”€ index.ts           # ä¸»å¯¼å‡º
â””â”€â”€ main.ts            # ä¸»ç¨‹åº
```

### Testing Strategy

#### æµ‹è¯•ç±»å‹
1. **å•å…ƒæµ‹è¯•** - æµ‹è¯•å•ä¸ªå‡½æ•°/ç±»ï¼Œä½äº `tests/<module>/`
2. **é›†æˆæµ‹è¯•** - æµ‹è¯•æ¨¡å—é—´äº¤äº’ï¼Œä½äº `tests/integration/`
3. **ç»ˆç«¯æµ‹è¯•** - ä½¿ç”¨ node-pty è¿›è¡ŒçœŸå®ç»ˆç«¯æ¨¡æ‹Ÿï¼Œä½äº `tests/terminal/`
4. **å±æ€§æµ‹è¯•** - ä½¿ç”¨ fast-checkï¼Œæ–‡ä»¶å‘½å `*.property.test.ts`

#### æµ‹è¯•è¦æ±‚
- æ‰€æœ‰æ–°åŠŸèƒ½å¿…é¡»æœ‰æµ‹è¯•
- Bug ä¿®å¤åº”åŒ…å«å›å½’æµ‹è¯•
- ç›®æ ‡æµ‹è¯•è¦†ç›–ç‡ > **80%**
- ç»ˆç«¯æµ‹è¯•è¶…æ—¶è®¾ç½®ä¸º **30ç§’**

#### æµ‹è¯•å‘½ä»¤
```bash
npm test                    # è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm run test:watch          # ç›‘å¬æ¨¡å¼
npm run test:coverage       # è¦†ç›–ç‡æŠ¥å‘Š
npm run test:terminal       # ç»ˆç«¯æµ‹è¯•
npm run test:property       # å±æ€§æµ‹è¯•
```

#### æµ‹è¯•æ–‡ä»¶ç»„ç»‡
```
tests/
â”œâ”€â”€ agents/
â”œâ”€â”€ ci/
â”œâ”€â”€ cli/
â”œâ”€â”€ commands/
â”œâ”€â”€ config/
â”œâ”€â”€ context/
â”œâ”€â”€ core/
â”œâ”€â”€ hooks/
â”œâ”€â”€ image/
â”œâ”€â”€ integration/
â”œâ”€â”€ mcp/
â”œâ”€â”€ output/
â”œâ”€â”€ permissions/
â”œâ”€â”€ plugins/
â”œâ”€â”€ rewind/
â”œâ”€â”€ sandbox/
â”œâ”€â”€ sdk/
â”œâ”€â”€ security/
â”œâ”€â”€ skills/
â”œâ”€â”€ terminal/
â”œâ”€â”€ testing/
â”œâ”€â”€ tools/
â”œâ”€â”€ ui/
â””â”€â”€ utils/
```

### Git Workflow

#### åˆ†æ”¯ç­–ç•¥
| åˆ†æ”¯ç±»å‹ | å‘½åæ ¼å¼ | ç”¨é€” |
|----------|----------|------|
| åŠŸèƒ½åˆ†æ”¯ | `feature/xxx` | æ–°åŠŸèƒ½å¼€å‘ |
| ä¿®å¤åˆ†æ”¯ | `fix/xxx` | Bug ä¿®å¤ |
| æ–‡æ¡£åˆ†æ”¯ | `docs/xxx` | æ–‡æ¡£æ›´æ–° |
| é‡æ„åˆ†æ”¯ | `refactor/xxx` | ä»£ç é‡æ„ |
| æµ‹è¯•åˆ†æ”¯ | `test/xxx` | æµ‹è¯•ç›¸å…³ |

#### Commit è§„èŒƒ
ä½¿ç”¨ [Conventional Commits](https://www.conventionalcommits.org/) è§„èŒƒï¼š

| ç±»å‹ | æè¿° |
|------|------|
| `feat` | æ–°åŠŸèƒ½ |
| `fix` | Bug ä¿®å¤ |
| `docs` | æ–‡æ¡£æ›´æ–° |
| `style` | ä»£ç æ ¼å¼ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰ |
| `refactor` | ä»£ç é‡æ„ |
| `test` | æµ‹è¯•ç›¸å…³ |
| `chore` | æ„å»º/å·¥å…·ç›¸å…³ |
| `perf` | æ€§èƒ½ä¼˜åŒ– |

æ ¼å¼ï¼š`<type>(<scope>): <subject>`

ç¤ºä¾‹ï¼š
```
feat(cli): add --timeout option for CI environments
fix(session): resolve session expiration check
docs(readme): update installation instructions
```

#### ç‰ˆæœ¬å‘å¸ƒ
éµå¾ª [Semantic Versioning](https://semver.org/)ï¼š
- **Major**: ä¸å…¼å®¹çš„ API å˜æ›´
- **Minor**: å‘åå…¼å®¹çš„åŠŸèƒ½æ·»åŠ 
- **Patch**: å‘åå…¼å®¹çš„ Bug ä¿®å¤

## Domain Context

### æ ¸å¿ƒæ¦‚å¿µ

| æ¦‚å¿µ | è¯´æ˜ |
|------|------|
| **Session** | ä¼šè¯ï¼ŒåŒ…å«å¯¹è¯å†å²ã€ä¸Šä¸‹æ–‡ã€é…ç½®ï¼Œæ”¯æŒæŒä¹…åŒ–å’Œæ¢å¤ |
| **Skill** | æŠ€èƒ½ï¼Œæ³¨å…¥é¢†åŸŸçŸ¥è¯†åˆ°ç³»ç»Ÿæç¤ºä¸­ |
| **Command** | å‘½ä»¤ï¼Œå¯é‡ç”¨çš„å‘½ä»¤æ¨¡æ¿ |
| **Agent** | å­ä»£ç†ï¼Œä¸“é—¨å¤„ç†ç‰¹å®šä»»åŠ¡ |
| **Hook** | é’©å­ï¼Œå·¥å…·ä½¿ç”¨åè‡ªåŠ¨è§¦å‘çš„æ“ä½œ |
| **MCP** | Model Context Protocolï¼Œå¤–éƒ¨å·¥å…·æœåŠ¡åè®® |
| **Permission Mode** | æƒé™æ¨¡å¼ï¼Œæ§åˆ¶å·¥å…·ä½¿ç”¨çš„å®‰å…¨çº§åˆ« |
| **Rewind** | å›é€€ï¼Œæ’¤é”€æ–‡ä»¶ä¿®æ”¹æ¢å¤åˆ°ä¹‹å‰çŠ¶æ€ |

### æ•°æ®æµ
```
ç”¨æˆ·è¾“å…¥ â†’ CLIParser è§£æå‚æ•°
       â†’ Application åˆå§‹åŒ–
       â†’ SessionManager åˆ›å»º/æ¢å¤ä¼šè¯
       â†’ MessageRouter æ„å»ºæŸ¥è¯¢é€‰é¡¹
       â†’ SDKQueryExecutor è°ƒç”¨ SDK
       â†’ StreamingProcessor å¤„ç†å“åº”
       â†’ OutputFormatter æ ¼å¼åŒ–è¾“å‡º
```

### å·¥å…·åˆ†ç±»
- **æ–‡ä»¶æ“ä½œ**: Read, Write, Edit
- **å‘½ä»¤æ‰§è¡Œ**: Bash, BashOutput, KillBash
- **æœç´¢**: Grep, Glob
- **ç”¨æˆ·äº¤äº’**: AskUserQuestion
- **ç½‘ç»œ**: WebFetch, WebSearch
- **ä»»åŠ¡**: Task, TodoWrite
- **Jupyter**: NotebookEdit
- **è®¡åˆ’**: ExitPlanMode
- **MCP**: ListMcpResources, ReadMcpResource

## Important Constraints

### æŠ€æœ¯çº¦æŸ
- **Node.js ç‰ˆæœ¬**ï¼šâ‰¥20.0.0ï¼ˆä½¿ç”¨ ES2022 ç‰¹æ€§ï¼‰
- **npm ç‰ˆæœ¬**ï¼šâ‰¥9.0.0
- **SDK ä¾èµ–**ï¼šå¿…é¡»ä½¿ç”¨ @anthropic-ai/claude-agent-sdk

### å®‰å…¨çº¦æŸ
- æ•æ„Ÿæ•°æ®æ£€æµ‹ï¼ˆAPI keys, passwords, tokensï¼‰
- å±é™©å‘½ä»¤è¯†åˆ«ï¼ˆ`rm -rf`, `dd`, `mkfs`ï¼‰
- ç ´åæ€§æ“ä½œéœ€ç¡®è®¤
- æƒé™æ¨¡å¼æ§åˆ¶å·¥å…·è®¿é—®

### æ€§èƒ½çº¦æŸ
- ä¼šè¯è¿‡æœŸæ—¶é—´ï¼š**5 å°æ—¶**
- ç»ˆç«¯æµ‹è¯•è¶…æ—¶ï¼š**30 ç§’**

### å¼€å‘çº¦æŸ
- **æ¨¡å—åŒ–**ï¼šéµå¾ª SOLID åŸåˆ™
- **æ–‡ä»¶é™åˆ¶**ï¼šå•æ–‡ä»¶ä¸è¶…è¿‡ 1000 è¡Œ
- **æ—¥å¿—ç²¾ç®€**ï¼šåªåœ¨é‡è¦åˆ†æ”¯æ·»åŠ è°ƒè¯•æ—¥å¿—
- **è‡ªæµ‹è¦æ±‚**ï¼šæ¨¡å—å¼€å‘å®Œæˆåéœ€è‡ªä¸»æµ‹è¯•ï¼Œæµ‹è¯•è„šæœ¬ä¸æ®‹ç•™

## External Dependencies

### æ ¸å¿ƒä¾èµ–
| ä¾èµ– | ç”¨é€” |
|------|------|
| `@anthropic-ai/claude-agent-sdk` | Claude AI Agent SDKï¼Œæ ¸å¿ƒ AI èƒ½åŠ› |
| `node-pty` | ç»ˆç«¯æ¨¡æ‹Ÿï¼Œæ”¯æŒçœŸå® PTY äº¤äº’ |
| `ajv` + `ajv-formats` | JSON Schema éªŒè¯ |
| `diff` | æ–‡ä»¶å·®å¼‚è®¡ç®— |
| `dotenv` | ç¯å¢ƒå˜é‡ç®¡ç† |

### å¤–éƒ¨æœåŠ¡
| æœåŠ¡ | è¯´æ˜ |
|------|------|
| Claude API | é€šè¿‡ Claude Agent SDK è®¿é—® |
| MCP Servers | å¯é…ç½®çš„å¤–éƒ¨å·¥å…·æœåŠ¡ |

### é…ç½®æ–‡ä»¶
| æ–‡ä»¶ | ä½ç½® | ç”¨é€” |
|------|------|------|
| `settings.json` | `~/.claude-replica/` | ç”¨æˆ·çº§é…ç½® |
| `settings.json` | `.claude-replica/` | é¡¹ç›®çº§é…ç½® |
| `settings.local.json` | `.claude-replica/` | æœ¬åœ°é…ç½®ï¼ˆä¸æäº¤ï¼‰ |
| `hooks.json` | `.claude-replica/` | Hook é…ç½® |
| `.mcp.json` | é¡¹ç›®æ ¹ç›®å½• | MCP æœåŠ¡å™¨é…ç½® |
| `CLAUDE.md` | é¡¹ç›®æ ¹ç›®å½• | é¡¹ç›®ä¸Šä¸‹æ–‡è¯´æ˜ |
